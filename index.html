<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AuraFlex Dashboard</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        /* Custom styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0D0D0D;
            overflow-x: hidden; /* Prevent horizontal scroll */
        }
        /* Style for the floating action button on mobile */
        .fab {
            transform: translateY(-50%);
            box-shadow: 0px 4px 15px rgba(255, 199, 0, 0.4);
        }
        /* Custom scrollbar for horizontal scrolling sections */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        /* Ensure charts are responsive */
        canvas {
            max-width: 100%;
            height: auto !important;
        }
        /* Hide pages by default */
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
        /* Modal Styles */
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
        }
        .calendar-day {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 2.5rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .calendar-day.today {
            background-color: #FFC700;
            color: #0D0D0D;
            border-radius: 50%;
        }
         .calendar-day:not(.empty):hover {
            background-color: #333;
            border-radius: 50%;
        }
        .toast {
            transition: opacity 0.3s, transform 0.3s;
        }
        #profile-overlay {
            transition: transform 0.3s ease-in-out;
        }
    </style>
</head>
<body class="text-white">

    <div class="flex min-h-screen">
        <aside class="bg-[#1C1C1E] w-64 p-6 flex-col hidden md:flex">
            <div class="flex-grow">
                <div class="flex items-center gap-3 mb-10">
                    <img src="https://placehold.co/40x40/FFC700/000?text=A" alt="App Logo" class="w-10 h-10 rounded-lg">
                    <h1 class="text-2xl font-bold">AuraFlex</h1>
                </div>
                <nav class="flex flex-col gap-4">
                    <a href="#" class="nav-item-desktop bg-yellow-400/10 text-yellow-400 flex items-center gap-4 p-3 rounded-lg" data-page="page-home">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                        <span class="font-semibold">Home</span>
                    </a>
                    <a href="#" class="nav-item-desktop text-gray-400 hover:bg-gray-700 flex items-center gap-4 p-3 rounded-lg" data-page="page-food">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3z"/></svg>
                        <span class="font-semibold">Food</span>
                    </a>
                    <a href="#" class="nav-item-desktop text-gray-400 hover:bg-gray-700 flex items-center gap-4 p-3 rounded-lg" data-page="page-calculator">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="2" width="16" height="20" rx="2"/><path d="M8 6h8"/><path d="M8 10h8"/><path d="M8 14h4"/></svg>
                        <span class="font-semibold">Calculator</span>
                    </a>
                     <a href="#" class="nav-item-desktop text-gray-400 hover:bg-gray-700 flex items-center gap-4 p-3 rounded-lg" data-page="page-settings">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
                        <span class="font-semibold">Settings</span>
                    </a>
                </nav>
            </div>
            <div id="desktop-action-section">
                 <button class="w-full bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-3 px-4 rounded-lg flex items-center justify-center gap-2" id="sidebar-log-food-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    <span>Log Food</span>
                </button>
            </div>
        </aside>

        <div class="flex-1">
            <div id="app-content" class="max-w-5xl mx-auto flex flex-col min-h-screen">
                <header class="p-4 md:p-8 flex items-center justify-between">
                    <div class="flex items-center gap-3 md:hidden">
                        <img src="https://placehold.co/40x40/FFC700/000?text=A" alt="App Logo" class="w-10 h-10 rounded-lg">
                        <h1 class="text-xl font-bold">AuraFlex</h1>
                    </div>
                    <h1 id="header-title" class="text-3xl font-bold hidden md:block">Hello, Alex!</h1>
                    <div class="flex items-center gap-4">
                        <button id="calendar-btn" class="flex items-center gap-2 bg-[#1C1C1E] p-2 rounded-lg cursor-pointer hover:bg-gray-700">
                           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#FFC700" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>
                           <span id="current-date" class="text-sm font-semibold text-white"></span>
                        </button>
                        <button id="profile-avatar-btn" class="focus:outline-none">
                            <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=40&h=40&auto=format&fit=crop" alt="User Avatar" class="w-10 h-10 rounded-full object-cover">
                        </button>
                    </div>
                </header>

                <main class="flex-grow p-4 md:p-8">
                    <div id="page-home" class="page active space-y-8">
                        <section class="bg-[#1C1C1E] p-6 rounded-2xl flex items-center justify-between">
                            <div>
                                <h2 class="text-2xl font-bold">Welcome back, Alex!</h2>
                                <p class="text-gray-400">"The only bad workout is the one that didn't happen."</p>
                            </div>
                            <div class="text-right">
                                <p class="font-semibold">Today's Goal</p>
                                <p class="text-2xl font-bold text-yellow-400">1550 Kcal</p>
                            </div>
                        </section>
                        <section>
                            <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6">
                                <div id="consumed-card" class="bg-[#1C1C1E] p-4 rounded-2xl flex items-center gap-4 cursor-pointer hover:bg-gray-800 transition-colors">
                                    <div class="bg-blue-500/20 p-2 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#3478F6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.5 12H19l-2.5 5-5-10-2.5 5H2.5"/></svg></div>
                                    <div><p class="text-sm text-gray-400">Consumed</p><p class="text-xl font-bold">989 <span class="text-sm font-normal">kcal</span></p></div>
                                </div>
                                <div class="bg-[#1C1C1E] p-4 rounded-2xl flex items-center gap-4">
                                    <div class="bg-yellow-400/20 p-2 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#FFC700" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg></div>
                                    <div><p class="text-sm text-gray-400">Goal</p><p class="text-xl font-bold">1550 <span class="text-sm font-normal">kcal</span></p></div>
                                </div>
                                <div class="bg-[#1C1C1E] p-4 rounded-2xl flex items-center gap-4">
                                    <div class="bg-red-500/20 p-2 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#FF453A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg></div>
                                    <div><p class="text-sm text-gray-400">Burned</p><p class="text-xl font-bold">215 <span class="text-sm font-normal">kcal</span></p></div>
                                </div>
                                <div class="bg-[#1C1C1E] p-4 rounded-2xl flex items-center gap-4">
                                    <div class="bg-green-500/20 p-2 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#34C759" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><path d="M2 9h4v12H2z"/><circle cx="4" cy="4" r="2"/></svg></div>
                                    <div><p class="text-sm text-gray-400">Net</p><p class="text-xl font-bold">774 <span class="text-sm font-normal">kcal</span></p></div>
                                </div>
                            </div>
                             <div class="bg-[#1C1C1E] p-6 rounded-2xl">
                                <h3 class="font-semibold mb-3">Today's Goal Progress</h3>
                                <div class="w-full bg-gray-700 rounded-full h-3">
                                    <div id="progress-bar" class="bg-gradient-to-r from-yellow-400 to-orange-500 h-3 rounded-full" style="width: 0%"></div>
                                </div>
                                <div class="flex justify-between text-xs text-gray-400 mt-2">
                                    <span id="progress-percentage">0%</span>
                                    <span id="progress-text">0 / 1550 kcal</span>
                                    <span>100%</span>
                                </div>
                            </div>
                        </section>
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <section class="lg:col-span-1 bg-[#1C1C1E] p-6 rounded-2xl flex flex-col">
                                <h2 class="text-xl font-semibold mb-4">Macros Breakdown</h2>
                                <div class="flex-grow flex flex-col-reverse md:flex-row items-center justify-center gap-6 md:gap-2">
                                    <div class="w-full md:w-1/2 space-y-4">
                                        <div class="flex items-center justify-between">
                                            <div class="flex items-center gap-3">
                                                <div class="w-8 h-8 bg-yellow-400/20 rounded-lg flex items-center justify-center"><div class="w-3 h-3 bg-yellow-400 rounded-full"></div></div>
                                                <div><p class="text-sm text-gray-400">Fat</p><p class="font-bold">45g</p></div>
                                            </div>
                                            <p class="font-semibold">15%</p>
                                        </div>
                                        <div class="flex items-center justify-between">
                                            <div class="flex items-center gap-3">
                                                <div class="w-8 h-8 bg-blue-500/20 rounded-lg flex items-center justify-center"><div class="w-3 h-3 bg-blue-500 rounded-full"></div></div>
                                                <div><p class="text-sm text-gray-400">Protein</p><p class="font-bold">110g</p></div>
                                            </div>
                                            <p class="font-semibold">36%</p>
                                        </div>
                                        <div class="flex items-center justify-between">
                                            <div class="flex items-center gap-3">
                                                <div class="w-8 h-8 bg-red-500/20 rounded-lg flex items-center justify-center"><div class="w-3 h-3 bg-red-500 rounded-full"></div></div>
                                                <div><p class="text-sm text-gray-400">Carbs</p><p class="font-bold">150g</p></div>
                                            </div>
                                            <p class="font-semibold">49%</p>
                                        </div>
                                    </div>
                                    <div class="w-40 h-40 md:w-1/2 relative">
                                        <canvas id="macrosChart"></canvas>
                                    </div>
                                </div>
                            </section>
                            <section class="lg:col-span-2 grid grid-rows-2 gap-8">
                                <div class="bg-blue-600 rounded-2xl p-6 flex flex-col h-full">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <p class="font-semibold text-lg">Hydration</p>
                                            <p id="total-ml" class="text-4xl font-bold mt-2">750 <span class="text-lg font-normal">ml</span></p>
                                        </div>
                                        <p class="text-sm opacity-80">Today</p>
                                    </div>
                                    <div class="mt-4 h-24 flex-grow"><canvas id="hydrationChart"></canvas></div>
                                    <hr class="border-blue-500 my-4">
                                    <div class="text-center">
                                        <p class="font-semibold mb-2">Water Intake</p>
                                        <div class="flex items-center justify-center gap-6">
                                            <button id="minus-glass" class="bg-blue-500 hover:bg-blue-400 text-white font-bold rounded-full w-10 h-10 flex items-center justify-center text-2xl">-</button>
                                            <div class="flex items-center gap-2">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white/80"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0L12 2.69z"/></svg>
                                                <p class="text-xl font-semibold"><span id="glass-count">3</span> glasses</p>
                                            </div>
                                            <button id="plus-glass" class="bg-blue-500 hover:bg-blue-400 text-white font-bold rounded-full w-10 h-10 flex items-center justify-center text-2xl">+</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-[#1C1C1E] p-6 rounded-2xl">
                                    <h3 class="text-xl font-semibold mb-4">Activity Streak</h3>
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center gap-4">
                                            <span class="text-5xl font-bold text-yellow-400">12</span>
                                            <span class="text-gray-400 mt-2">days</span>
                                        </div>
                                        <div class="flex items-center gap-2 text-green-500 font-semibold">
                                           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14"/><path d="m18 11-6-6-6 6"/></svg>
                                           <span>+2 this week</span>
                                        </div>
                                    </div>
                                    <div class="mt-4 flex items-center gap-4">
                                        <span class="text-2xl">🏆</span>
                                        <div class="flex gap-2">
                                            <div class="bg-yellow-400/20 text-yellow-400 font-semibold p-2 rounded-lg text-xs">Weekly Goal</div>
                                            <div class="bg-gray-700 p-2 rounded-lg text-xs text-gray-400">Monthly Goal</div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>

                    <div id="page-food" class="page">
                        <div class="bg-[#1C1C1E] p-6 rounded-2xl">
                            <div class="flex justify-between items-center mb-6">
                                <div>
                                    <h2 class="text-2xl font-bold">Calorie Chart & Nutrition Facts</h2>
                                    <p class="text-gray-400">Search for a food to find nutrition information.</p>
                                </div>
                                <button id="log-food-btn-desktop" class="bg-yellow-400 text-black font-bold py-2 px-4 rounded-lg flex items-center gap-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    <span>Log Food</span>
                                </button>
                            </div>
                            <div class="relative">
                                <input type="text" placeholder="E.g., 'Apple' or 'Big Mac'" class="w-full bg-[#0D0D0D] border border-gray-700 rounded-lg py-3 px-4 pl-10 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400">
                                <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                            </div>
                             <div class="mt-8 text-center text-gray-500">
                                <p>Search results will appear here.</p>
                            </div>
                        </div>
                    </div>

                    <div id="page-calculator" class="page space-y-8">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <div class="bg-[#1C1C1E] p-6 rounded-2xl">
                                <h3 class="text-xl font-bold mb-4">BMI Calculator</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label for="bmi-weight" class="text-sm text-gray-400">Weight (kg)</label>
                                        <input type="number" id="bmi-weight" class="w-full bg-[#0D0D0D] border border-gray-700 rounded-lg mt-1 p-2 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                                    </div>
                                    <div>
                                        <label for="bmi-height" class="text-sm text-gray-400">Height (cm)</label>
                                        <input type="number" id="bmi-height" class="w-full bg-[#0D0D0D] border border-gray-700 rounded-lg mt-1 p-2 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                                    </div>
                                    <button id="calculate-bmi" class="w-full bg-yellow-400 text-black font-bold py-2 rounded-lg">Calculate BMI</button>
                                    <div id="bmi-result" class="text-center pt-4"></div>
                                </div>
                            </div>
                            <div class="bg-[#1C1C1E] p-6 rounded-2xl">
                                <h3 class="text-xl font-bold mb-4">BMR Calculator</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label for="bmr-age" class="text-sm text-gray-400">Age</label>
                                        <input type="number" id="bmr-age" class="w-full bg-[#0D0D0D] border border-gray-700 rounded-lg mt-1 p-2 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                                    </div>
                                    <div>
                                        <label class="text-sm text-gray-400">Gender</label>
                                        <select id="bmr-gender" class="w-full bg-[#0D0D0D] border border-gray-700 rounded-lg mt-1 p-2 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                                            <option value="male">Male</option>
                                            <option value="female">Female</option>
                                        </select>
                                    </div>
                                     <div>
                                        <label for="bmr-weight" class="text-sm text-gray-400">Weight (kg)</label>
                                        <input type="number" id="bmr-weight" class="w-full bg-[#0D0D0D] border border-gray-700 rounded-lg mt-1 p-2 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                                    </div>
                                    <div>
                                        <label for="bmr-height" class="text-sm text-gray-400">Height (cm)</label>
                                        <input type="number" id="bmr-height" class="w-full bg-[#0D0D0D] border border-gray-700 rounded-lg mt-1 p-2 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                                    </div>
                                    <button id="calculate-bmr" class="w-full bg-yellow-400 text-black font-bold py-2 rounded-lg">Calculate BMR</button>
                                    <div id="bmr-result" class="text-center pt-4"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="page-settings" class="page space-y-8">
                        
                        <div class="bg-[#1C1C1E] p-4 rounded-2xl">
                            <h3 class="text-xl font-bold mb-4 px-2">General Settings</h3>
                            <nav class="flex flex-col">
                                <a href="#" id="settings-profile-btn" class="flex items-center gap-4 p-4 hover:bg-gray-800/50 rounded-lg transition-colors">
                                    <svg class="w-6 h-6 text-yellow-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                                    <span class="flex-1 font-semibold">Profile</span>
                                    <svg class="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                                </a>
                                <div class="border-t border-gray-700/50 mx-4"></div>
                                <a href="#" class="flex items-center gap-4 p-4 hover:bg-gray-800/50 rounded-lg transition-colors">
                                     <svg class="w-6 h-6 text-yellow-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                                    <span class="flex-1 font-semibold">About Us</span>
                                    <svg class="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                                </a>
                                <div class="border-t border-gray-700/50 mx-4"></div>
                                <a href="#" class="flex items-center gap-4 p-4 hover:bg-gray-800/50 rounded-lg transition-colors">
                                     <svg class="w-6 h-6 text-yellow-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                                    <span class="flex-1 font-semibold">FAQ</span>
                                    <svg class="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                                </a>
                                <div class="border-t border-gray-700/50 mx-4"></div>
                                <a href="#" class="flex items-center gap-4 p-4 hover:bg-gray-800/50 rounded-lg transition-colors">
                                    <svg class="w-6 h-6 text-yellow-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                                    <span class="flex-1 font-semibold">Contact Us</span>
                                    <svg class="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                                </a>
                            </nav>
                        </div>

                        <div class="pt-4">
                             <button id="settings-page-logout-btn" class="w-full flex items-center justify-center gap-3 text-red-500 font-bold py-3 px-6 rounded-lg hover:bg-red-500/10 transition-colors">
                                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                                 <span>Logout</span>
                            </button>
                        </div>
                        
                        <div class="text-center pt-4 pb-0">
                            <p class="text-xs text-gray-500">
                                Made with ❤ by
                                <a href="https://www.instagram.com/sh_roy_" target="_blank" rel="noopener noreferrer" class="font-semibold text-yellow-500 hover:text-white transition-colors">
                                    Ashutosh
                                </a>
                            </p>
                        </div>
                    </div>
                </main>

                <div class="h-40 md:hidden"></div>
            </div>
        </div>
    </div>

    <footer class="fixed bottom-0 left-0 right-0 max-w-sm mx-auto md:hidden z-10">
        <div class="relative bg-[#1C1C1E] rounded-t-3xl">
            <nav class="flex justify-around items-center p-4 text-gray-400">
                <a href="#" class="nav-item text-yellow-400 flex flex-col items-center gap-1" data-page="page-home">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                    <span class="text-xs">Home</span>
                </a>
                <a href="#" class="nav-item flex flex-col items-center gap-1" data-page="page-food">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3z"/></svg>
                    <span class="text-xs">Food</span>
                </a>
                <div class="w-12 h-12"></div>
                <a href="#" class="nav-item flex flex-col items-center gap-1" data-page="page-calculator">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="2" width="16" height="20" rx="2"/><path d="M8 6h8"/><path d="M8 10h8"/><path d="M8 14h4"/></svg>
                    <span class="text-xs">Calculator</span>
                </a>
                <a href="#" class="nav-item flex flex-col items-center gap-1" data-page="page-settings">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
                    <span class="text-xs">Settings</span>
                </a>
            </nav>
            <div class="absolute top-0 left-1/2 -translate-x-1/2">
                <button id="fab-log-food" class="w-16 h-16 bg-yellow-400 rounded-full flex items-center justify-center text-black fab">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                </button>
            </div>
        </div>
    </footer>
    
    <div id="profile-overlay" class="fixed inset-0 bg-[#0D0D0D] z-50 transform translate-x-full overflow-y-auto">
        <div class="max-w-5xl mx-auto space-y-6 pb-8">
            <div class="flex items-center justify-between p-4 md:p-6">
                <button id="profile-back-btn" class="p-2 rounded-full hover:bg-gray-800">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
                </button>
                <h2 class="text-xl font-bold">Profile</h2>
                <div class="flex items-center gap-2">
                    <button class="p-2 rounded-full hover:bg-gray-800">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>
                    </button>
                    <button class="p-2 rounded-full hover:bg-gray-800">
                         <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect></svg>
                    </button>
                </div>
            </div>

            <div class="flex flex-col items-center text-center space-y-2 px-4 md:px-6">
                <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=256&h=256&auto=format&fit=crop" alt="User Avatar" class="w-24 h-24 rounded-full object-cover">
                <h3 class="text-2xl font-bold">Zarinee Karlockie</h3>
                <button class="flex items-center gap-1 text-gray-400">
                    <span>Sunset Boulevard</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-9"/></svg>
                </button>
            </div>

            <div class="bg-[#1C1C1E] p-4 mx-4 md:mx-6 rounded-2xl flex items-center justify-around">
                <div class="text-center">
                    <p class="text-sm text-gray-400">Protein</p>
                    <p class="font-bold text-lg">25%</p>
                </div>
                <div class="text-center">
                    <p class="text-sm text-gray-400">Carbs</p>
                    <p class="font-bold text-lg">35%</p>
                </div>
                <div class="text-center">
                    <p class="text-sm text-gray-400">Fat</p>
                    <p class="font-bold text-lg">40%</p>
                </div>
                <div class="w-20 h-20 relative">
                    <canvas id="profileMacrosChart"></canvas>
                </div>
            </div>
            
            <div class="bg-[#1C1C1E] mx-4 md:mx-6 rounded-2xl">
                <nav class="flex flex-col">
                    <a href="#" class="flex items-center gap-4 p-4 hover:bg-gray-800/50 rounded-t-2xl">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#FFC700" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.3"/></svg>
                        <span class="flex-1 font-semibold">Dietary preferences</span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><polyline points="9 18 15 12 9 6"></polyline></svg>
                    </a>
                    <div class="border-t border-gray-700 mx-4"></div>
                    <a href="#" class="flex items-center gap-4 p-4 hover:bg-gray-800/50">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#FFC700" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
                        <span class="flex-1 font-semibold">Fitness goals</span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><polyline points="9 18 15 12 9 6"></polyline></svg>
                    </a>
                    <div class="border-t border-gray-700 mx-4"></div>
                    <a href="#" class="flex items-center gap-4 p-4 hover:bg-gray-800/50 rounded-b-2xl">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#FFC700" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"/></svg>
                        <span class="flex-1 font-semibold">Allergies or restrictions</span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><polyline points="9 18 15 12 9 6"></polyline></svg>
                    </a>
                </nav>
            </div>
            
            <div class="bg-[#1C1C1E] mx-4 md:mx-6 rounded-2xl">
                <nav class="flex flex-col">
                    <a href="#" class="flex items-center gap-4 p-4 hover:bg-gray-800/50 rounded-t-2xl">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
                        <span class="flex-1 font-semibold">Notification</span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><polyline points="9 18 15 12 9 6"></polyline></svg>
                    </a>
                    <div class="border-t border-gray-700 mx-4"></div>
                    <a href="#" class="flex items-center gap-4 p-4 hover:bg-gray-800/50">
                         <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line></svg>
                        <span class="flex-1 font-semibold">Wearable/device</span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><polyline points="9 18 15 12 9 6"></polyline></svg>
                    </a>
                     <div class="border-t border-gray-700 mx-4"></div>
                    <a href="#" class="flex items-center gap-4 p-4 hover:bg-gray-800/50">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                        <span class="flex-1 font-semibold">Change Password</span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><polyline points="9 18 15 12 9 6"></polyline></svg>
                    </a>
                    <div class="border-t border-gray-700 mx-4"></div>
                    <a href="#" class="flex items-center gap-4 p-4 hover:bg-gray-800/50 rounded-b-2xl">
                         <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                        <span class="flex-1 font-semibold">Language Selection</span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><polyline points="9 18 15 12 9 6"></polyline></svg>
                    </a>
                </nav>
            </div>

            <div class="px-4 md:px-6 pt-4">
                <button id="profile-logout-btn" class="flex items-center w-full justify-center gap-4 p-4 text-red-500 rounded-2xl hover:bg-red-500/10">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                    <span class="font-semibold">Logout</span>
                </button>
            </div>
        </div>
    </div>

    <div id="log-food-modal" class="fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4 modal-overlay opacity-0 pointer-events-none">
        <div class="bg-[#1C1C1E] w-full max-w-md rounded-2xl p-8 text-white modal-content transform scale-95">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Log Food Item</h2>
                <button id="close-log-food-modal" class="text-gray-400 hover:text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                </button>
            </div>
            <div class="space-y-4">
                <div>
                    <label for="food-name" class="text-sm text-gray-400">Food Name</label>
                    <input type="text" id="food-name" placeholder="e.g., Apple, Roti, Chicken Breast" class="w-full bg-[#0D0D0D] border border-gray-700 rounded-lg mt-1 p-2 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                </div>
                <div>
                    <label for="food-quantity" class="text-sm text-gray-400">Quantity (g)</label>
                    <input type="number" id="food-quantity" value="100" class="w-full bg-[#0D0D0D] border border-gray-700 rounded-lg mt-1 p-2 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                </div>
                <div>
                    <label for="food-time" class="text-sm text-gray-400">Time (Optional)</label>
                    <input type="time" id="food-time" class="w-full bg-[#0D0D0D] border border-gray-700 rounded-lg mt-1 p-2 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                </div>
                <button id="add-to-log-btn" class="w-full bg-yellow-400 text-black font-bold py-3 rounded-lg mt-4">Add to Log</button>
            </div>
        </div>
    </div>

    <div id="consumed-food-modal" class="fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4 modal-overlay opacity-0 pointer-events-none">
        <div class="bg-[#1C1C1E] w-full max-w-lg rounded-2xl p-8 text-white modal-content transform scale-95">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Consumed Food Details</h2>
                <button id="close-consumed-food-modal" class="text-gray-400 hover:text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                </button>
            </div>
            <div class="space-y-4">
                <div class="grid grid-cols-5 gap-4 text-sm text-gray-400 font-semibold border-b border-gray-700 pb-2">
                    <div class="col-span-2">Food</div>
                    <div>Protein</div>
                    <div>Carbs</div>
                    <div>Fat</div>
                </div>
                <div class="grid grid-cols-5 gap-4 items-center">
                    <div class="col-span-2">
                        <p class="font-semibold">Chicken Breast</p>
                        <p class="text-xs text-gray-400">150g - 195 Kcal</p>
                    </div>
                    <div>35g</div>
                    <div>0g</div>
                    <div>5g</div>
                </div>
                <div class="grid grid-cols-5 gap-4 items-center">
                    <div class="col-span-2">
                        <p class="font-semibold">Brown Rice</p>
                        <p class="text-xs text-gray-400">100g - 120 Kcal</p>
                    </div>
                    <div>3g</div>
                    <div>25g</div>
                    <div>1g</div>
                </div>
            </div>
        </div>
    </div>

    <div id="calendar-modal" class="fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4 modal-overlay opacity-0 pointer-events-none">
        <div class="bg-[#1C1C1E] w-full max-w-sm rounded-2xl p-6 text-white modal-content transform scale-95">
            <div class="flex justify-between items-center mb-4">
                <button id="prev-month-btn" class="p-2 rounded-full hover:bg-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
                </button>
                <h3 id="month-year-header" class="text-lg font-semibold"></h3>
                <button id="next-month-btn" class="p-2 rounded-full hover:bg-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                </button>
            </div>
            <div class="grid grid-cols-7 text-center text-xs text-gray-400 mb-2">
                <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
            </div>
            <div id="calendar-grid-body" class="calendar-grid"></div>
        </div>
    </div>

    <div id="toast" class="fixed bottom-20 right-5 bg-green-500 text-white py-2 px-4 rounded-lg shadow-lg opacity-0 transform translate-y-5 toast md:bottom-5">
        Meal added!
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let currentDate = new Date();

            // --- Set Initial Date ---
            const dateElement = document.getElementById('current-date');
            function updateDateDisplay(date) {
                if(dateElement) {
                    const options = { month: 'short', day: 'numeric' };
                    dateElement.textContent = date.toLocaleDateString('en-US', options);
                }
            }
            updateDateDisplay(currentDate);
            
            // --- Toast Notification Logic ---
            const toast = document.getElementById('toast');
            function showToast(message) {
                toast.textContent = message;
                toast.classList.remove('opacity-0', 'translate-y-5');
                setTimeout(() => {
                    toast.classList.add('opacity-0', 'translate-y-5');
                }, 3000);
            }

            // --- Generic Modal Logic ---
            function setupModal(modalId, openBtnIds, closeBtnId) {
                const modal = document.getElementById(modalId);
                const closeBtn = document.getElementById(closeBtnId);
                
                const openModal = () => {
                    modal.classList.remove('pointer-events-none', 'opacity-0');
                    modal.querySelector('.modal-content').classList.remove('scale-95');
                }
                const closeModal = () => {
                    modal.classList.add('opacity-0');
                    modal.querySelector('.modal-content').classList.add('scale-95');
                    setTimeout(() => modal.classList.add('pointer-events-none'), 300);
                }

                openBtnIds.forEach(btnId => {
                    const openBtn = document.getElementById(btnId);
                    if(openBtn) openBtn.addEventListener('click', openModal);
                });

                if(closeBtn) closeBtn.addEventListener('click', closeModal);
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) closeModal();
                });
                return { openModal, closeModal };
            }

            // --- Setup Modals ---
            const { closeModal: closeLogFoodModal } = setupModal('log-food-modal', ['fab-log-food', 'log-food-btn-desktop', 'sidebar-log-food-btn'], 'close-log-food-modal');
            const { closeModal: closeCalendarModal } = setupModal('calendar-modal', ['calendar-btn'], null);
            setupModal('consumed-food-modal', ['consumed-card'], 'close-consumed-food-modal');

            document.getElementById('add-to-log-btn').addEventListener('click', () => {
                closeLogFoodModal();
                showToast('Meal added successfully!');
            });

            // --- Calendar Logic ---
            const monthYearHeader = document.getElementById('month-year-header');
            const calendarGridBody = document.getElementById('calendar-grid-body');
            const prevMonthBtn = document.getElementById('prev-month-btn');
            const nextMonthBtn = document.getElementById('next-month-btn');

            function generateCalendar(date) {
                calendarGridBody.innerHTML = '';
                const month = date.getMonth();
                const year = date.getFullYear();
                
                monthYearHeader.textContent = date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });

                const firstDayOfMonth = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();

                for (let i = 0; i < firstDayOfMonth; i++) {
                    calendarGridBody.insertAdjacentHTML('beforeend', '<div class="calendar-day empty"></div>');
                }

                for (let i = 1; i <= daysInMonth; i++) {
                    const dayEl = document.createElement('div');
                    dayEl.className = 'calendar-day';
                    dayEl.textContent = i;
                    
                    const today = new Date();
                    if (i === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                        dayEl.classList.add('today');
                    }
                    
                    dayEl.addEventListener('click', () => {
                        currentDate = new Date(year, month, i);
                        updateDateDisplay(currentDate);
                        closeCalendarModal();
                    });
                    calendarGridBody.appendChild(dayEl);
                }
            }
            
            prevMonthBtn.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                generateCalendar(currentDate);
            });
            nextMonthBtn.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                generateCalendar(currentDate);
            });
            
            document.getElementById('calendar-btn').addEventListener('click', () => generateCalendar(currentDate));


            // --- Page & Navigation State ---
            const pages = document.querySelectorAll('.page');
            const navLinksDesktop = document.querySelectorAll('.nav-item-desktop');
            const navLinksMobile = document.querySelectorAll('.nav-item');
            const headerTitle = document.getElementById('header-title');
            const pageTitles = {
                'page-home': 'Hello, Alex!',
                'page-food': 'Nutrition Search',
                'page-calculator': 'Health Calculators',
                'page-settings': 'Settings'
            };

            function showPage(pageId) {
                pages.forEach(page => page.classList.remove('active'));
                document.getElementById(pageId)?.classList.add('active');
                headerTitle.textContent = pageTitles[pageId] || 'AuraFlex';
            }

            function setActiveNav(links, activeLink) {
                 links.forEach(link => {
                    link.classList.remove('bg-yellow-400/10', 'text-yellow-400');
                    link.classList.add('text-gray-400', 'hover:bg-gray-700');
                });
                activeLink.classList.add('bg-yellow-400/10', 'text-yellow-400');
                activeLink.classList.remove('text-gray-400', 'hover:bg-gray-700');
            }

            function setActiveNavMobile(activeLink) {
                navLinksMobile.forEach(link => link.classList.remove('text-yellow-400'));
                activeLink.classList.add('text-yellow-400');
            }
            
            function handleNavClick(e, isMobile) {
                e.preventDefault();
                const link = e.currentTarget;
                const pageId = link.getAttribute('data-page');
                showPage(pageId);
                if (isMobile) setActiveNavMobile(link);
                else setActiveNav(navLinksDesktop, link);
            }

            navLinksDesktop.forEach(link => link.addEventListener('click', (e) => handleNavClick(e, false)));
            navLinksMobile.forEach(link => link.addEventListener('click', (e) => handleNavClick(e, true)));

            // --- Profile Overlay Logic ---
            const profileOverlay = document.getElementById('profile-overlay');
            const profileAvatarBtn = document.getElementById('profile-avatar-btn');
            const profileBackBtn = document.getElementById('profile-back-btn');
            const settingsProfileBtn = document.getElementById('settings-profile-btn'); 

            const openProfile = () => profileOverlay.classList.remove('translate-x-full');
            const closeProfile = () => profileOverlay.classList.add('translate-x-full');

            profileAvatarBtn.addEventListener('click', openProfile);
            profileBackBtn.addEventListener('click', closeProfile);
            if (settingsProfileBtn) {
                settingsProfileBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    openProfile();
                });
            }

            // --- Logout Logic ---
            const allLogoutButtons = document.querySelectorAll('#profile-logout-btn, #settings-page-logout-btn');

            function performLogout() {
                closeProfile(); // Ensure profile is closed if open
                showToast("You have been logged out.");
                showPage('page-home');
            }

            allLogoutButtons.forEach(btn => {
                btn.addEventListener('click', performLogout);
            });


            // --- Calculator Logic ---
            const calculateBmiBtn = document.getElementById('calculate-bmi');
            if(calculateBmiBtn) {
                calculateBmiBtn.addEventListener('click', () => {
                    const weight = parseFloat(document.getElementById('bmi-weight').value);
                    const height = parseFloat(document.getElementById('bmi-height').value);
                    const resultEl = document.getElementById('bmi-result');

                    if (weight > 0 && height > 0) {
                        const bmi = (weight / ((height / 100) ** 2)).toFixed(1);
                        let category = '';
                        if (bmi < 18.5) category = 'Underweight';
                        else if (bmi < 24.9) category = 'Normal weight';
                        else if (bmi < 29.9) category = 'Overweight';
                        else category = 'Obesity';
                        resultEl.innerHTML = `<p class="text-2xl font-bold">${bmi}</p><p class="text-gray-400">${category}</p>`;
                    } else {
                        resultEl.innerHTML = `<p class="text-red-400">Please enter valid weight and height.</p>`;
                    }
                });
            }

            const calculateBmrBtn = document.getElementById('calculate-bmr');
            if(calculateBmrBtn) {
                calculateBmrBtn.addEventListener('click', () => {
                    const age = parseInt(document.getElementById('bmr-age').value);
                    const gender = document.getElementById('bmr-gender').value;
                    const weight = parseFloat(document.getElementById('bmr-weight').value);
                    const height = parseFloat(document.getElementById('bmr-height').value);
                    const resultEl = document.getElementById('bmr-result');

                    if (age > 0 && weight > 0 && height > 0) {
                        let bmr = 0;
                        if (gender === 'male') {
                            bmr = (10 * weight) + (6.25 * height) - (5 * age) + 5;
                        } else {
                            bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161;
                        }
                        resultEl.innerHTML = `<p class="text-2xl font-bold">${bmr.toFixed(0)}</p><p class="text-gray-400">calories/day</p>`;
                    } else {
                         resultEl.innerHTML = `<p class="text-red-400">Please fill all fields correctly.</p>`;
                    }
                });
            }
            

            // --- Chart.js & Home Page Logic ---
            let hydrationChart;
            
            // Home Page Macros Chart
            const macrosCtx = document.getElementById('macrosChart');
            if (macrosCtx) {
                new Chart(macrosCtx, {
                    type: 'doughnut',
                    data: { 
                        labels: ['Fat', 'Protein', 'Carbs'], 
                        datasets: [{ 
                            data: [45, 110, 150], 
                            backgroundColor: ['#FFC700', '#3478F6', '#FF453A'], 
                            borderColor: '#1C1C1E', 
                            borderWidth: 5, 
                            borderRadius: 10, 
                            cutout: '80%' 
                        }] 
                    },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false }, tooltip: { enabled: true, callbacks: { label: (c) => `${c.label}: ${c.raw}g` } } } }
                });
            }
            
            // Profile Page Macros Chart
            const profileMacrosCtx = document.getElementById('profileMacrosChart');
            if (profileMacrosCtx) {
                new Chart(profileMacrosCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Protein', 'Carbs', 'Fat'],
                        datasets: [{
                            data: [25, 35, 40], // Protein, Carbs, Fat percentages
                            backgroundColor: ['#3478F6', '#FF453A', '#FFC700'], // Blue, Red, Yellow
                            borderColor: '#1C1C1E',
                            borderWidth: 4,
                            borderRadius: 8,
                            cutout: '75%'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                enabled: true,
                                callbacks: {
                                    label: (c) => `${c.label}: ${c.raw}%`
                                }
                            }
                        }
                    }
                });
            }

            const hydrationCtx = document.getElementById('hydrationChart');
            const mlPerGlass = 250;
            let glassCount = 3;
            const plusButton = document.getElementById('plus-glass');
            const minusButton = document.getElementById('minus-glass');
            const glassCountEl = document.getElementById('glass-count');
            const totalMlEl = document.getElementById('total-ml');
            const initialChartData = [50, 150, 100, 250, 300, 450, 600, 750];

            function updateHydration() {
                if(!glassCountEl || !totalMlEl) return;
                const totalMl = glassCount * mlPerGlass;
                glassCountEl.textContent = glassCount;
                totalMlEl.innerHTML = `${totalMl} <span class="text-lg font-normal">ml</span>`;
                if (hydrationChart) {
                    hydrationChart.data.datasets[0].data[hydrationChart.data.datasets[0].data.length - 1] = totalMl;
                    hydrationChart.update();
                }
            }

            if (hydrationCtx) {
                hydrationChart = new Chart(hydrationCtx, {
                    type: 'line',
                    data: { labels: ['12am', '3am', '6am', '9am', '12pm', '3pm', '6pm', 'Now'], datasets: [{ label: 'Hydration', data: initialChartData, fill: true, backgroundColor: 'rgba(52, 120, 246, 0.2)', borderColor: '#3478F6', tension: 0.4, pointBackgroundColor: '#3478F6', pointBorderColor: '#fff' }] },
                    options: { responsive: true, maintainAspectRatio: false, scales: { y: { display: false }, x: { display: true, grid: { display: false }, ticks: { color: 'rgba(255, 255, 255, 0.5)' } } }, plugins: { legend: { display: false }, tooltip: { enabled: true, mode: 'index', intersect: false, callbacks: { label: (c) => `Water: ${c.raw} ml` } } } }
                });
            }
            
            if(plusButton && minusButton) {
                plusButton.addEventListener('click', () => { glassCount++; updateHydration(); });
                minusButton.addEventListener('click', () => { if (glassCount > 0) { glassCount--; updateHydration(); } });
            }
            
            // --- Dynamic Progress Bar ---
            function updateProgressBar() {
                const consumed = 989;
                const goal = 1550;
                const percentage = Math.min(Math.round((consumed / goal) * 100), 100);
                
                const progressBar = document.getElementById('progress-bar');
                const progressText = document.getElementById('progress-text');
                const progressPercentage = document.getElementById('progress-percentage');
                
                if(progressBar && progressText && progressPercentage) {
                    progressBar.style.width = `${percentage}%`;
                    progressText.textContent = `${consumed} / ${goal} kcal`;
                    progressPercentage.textContent = `${percentage}%`;
                }
            }

            // Initialize on load
            updateHydration();
            updateProgressBar();
        });
    </script>

</body>
</html>
